"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9563],{9563:(R,p,r)=>{r.r(p),r.d(p,{SignupPageModule:()=>M});var S=r(6895),g=r(4006),m=r(7771),i=r(2694),c=r(5230),d=r(5861),n=r(4650),h=r(958),f=r(9646),v=r(2843),Z=r(3099),A=r(5146),N=r(1133);let T=(()=>{class o{constructor(e,t){this.apiService=e,this.loginService=t}login(e){this.loginService.login(e).then(t=>(this.loggedIn(t),(0,f.of)(t))).catch(t=>(console.error("ERROR",t),(0,v._)(t)))}findAll(){return this.apiService.get("users")}signup(e){return this.apiService.post("register",e,{responseType:"text"}).pipe((0,Z.B)())}logout(){this.loginService.logout(),this.user=null}loggedIn(e){this.user=e.user}}return o.\u0275fac=function(e){return new(e||o)(n.LFG(A.s),n.LFG(N.r))},o.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const E=[{path:"",component:(()=>{class o{constructor(e,t,a,s){this.navController=e,this.userService=t,this.toastController=a,this.translateService=s,this.account={login:"",email:"",firstName:"",lastName:"",password:"",langKey:"en"},this.translateService.get(["SIGNUP_ERROR","SIGNUP_SUCCESS","EXISTING_USER_ERROR","INVALID_PASSWORD_ERROR"]).subscribe(l=>{this.signupErrorString=l.SIGNUP_ERROR,this.signupSuccessString=l.SIGNUP_SUCCESS,this.existingUserError=l.EXISTING_USER_ERROR,this.invalidPasswordError=l.INVALID_PASSWORD_ERROR})}ngOnInit(){}doSignup(){var e=this;this.account.login=this.account.email,this.userService.signup(this.account).subscribe((0,d.Z)(function*(){(yield e.toastController.create({message:e.signupSuccessString,duration:3e3,position:"top"})).present()}),function(){var t=(0,d.Z)(function*(a){const s=JSON.parse(a.error);let l=e.signupErrorString;400===a.status&&s.type.includes("already-used")?l=e.existingUserError:400===a.status&&"error.validation"===s.message&&"password"===s.fieldErrors[0].field&&"Size"===s.fieldErrors[0].message&&(l=e.invalidPasswordError),(yield e.toastController.create({message:l,duration:3e3,position:"middle"})).present()});return function(a){return t.apply(this,arguments)}}())}}return o.\u0275fac=function(e){return new(e||o)(n.Y36(h.SH),n.Y36(T),n.Y36(i.yF),n.Y36(c.sK))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-signup"]],decls:35,vars:22,consts:[["slot","start"],[1,"ion-padding"],[3,"submit"],["position","floating"],["type","string","name","firstName",3,"ngModel","ngModelChange"],["type","string","name","lastName",3,"ngModel","ngModelChange"],["type","email","name","email",3,"ngModel","ngModelChange"],["type","password","name","password",3,"ngModel","ngModelChange"],["expand","block","type","submit","color","primary"]],template:function(e,t){1&e&&(n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),n._UZ(3,"ion-back-button"),n.qZA(),n.TgZ(4,"ion-title"),n._uU(5),n.ALo(6,"translate"),n.qZA()()(),n.TgZ(7,"ion-content",1)(8,"form",2),n.NdJ("submit",function(){return t.doSignup()}),n.TgZ(9,"ion-list")(10,"ion-item")(11,"ion-label",3),n._uU(12),n.ALo(13,"translate"),n.qZA(),n.TgZ(14,"ion-input",4),n.NdJ("ngModelChange",function(s){return t.account.firstName=s}),n.qZA()(),n.TgZ(15,"ion-item")(16,"ion-label",3),n._uU(17),n.ALo(18,"translate"),n.qZA(),n.TgZ(19,"ion-input",5),n.NdJ("ngModelChange",function(s){return t.account.lastName=s}),n.qZA()(),n.TgZ(20,"ion-item")(21,"ion-label",3),n._uU(22),n.ALo(23,"translate"),n.qZA(),n.TgZ(24,"ion-input",6),n.NdJ("ngModelChange",function(s){return t.account.email=s}),n.qZA()(),n.TgZ(25,"ion-item")(26,"ion-label",3),n._uU(27),n.ALo(28,"translate"),n.qZA(),n.TgZ(29,"ion-input",7),n.NdJ("ngModelChange",function(s){return t.account.password=s}),n.qZA()(),n.TgZ(30,"ion-row",1)(31,"ion-col")(32,"ion-button",8),n._uU(33),n.ALo(34,"translate"),n.qZA()()()()()()),2&e&&(n.xp6(5),n.Oqu(n.lcZ(6,10,"SIGNUP_TITLE")),n.xp6(7),n.Oqu(n.lcZ(13,12,"FIRST_NAME")),n.xp6(2),n.Q6J("ngModel",t.account.firstName),n.xp6(3),n.Oqu(n.lcZ(18,14,"LAST_NAME")),n.xp6(2),n.Q6J("ngModel",t.account.lastName),n.xp6(3),n.Oqu(n.lcZ(23,16,"EMAIL")),n.xp6(2),n.Q6J("ngModel",t.account.email),n.xp6(3),n.Oqu(n.lcZ(28,18,"PASSWORD")),n.xp6(2),n.Q6J("ngModel",t.account.password),n.xp6(4),n.Oqu(n.lcZ(34,20,"SIGNUP_BUTTON")))},dependencies:[g._Y,g.JJ,g.JL,g.On,g.F,i.YG,i.Sm,i.wI,i.W2,i.Gu,i.pK,i.Ie,i.Q$,i.q_,i.Nd,i.wd,i.sr,i.j9,i.oU,c.X$]}),o})()}];let M=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[S.ez,g.u5,i.Pc,m.Bz.forChild(E),c.aw]}),o})()}}]);