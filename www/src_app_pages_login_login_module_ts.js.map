{"version":3,"file":"src_app_pages_login_login_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;;AAA+C;AACN;AACI;AACU;AACV;AACS;AACb;AAEzC,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,kDAAS;KACrB;CACF,CAAC;IAMW,eAAe,SAAf,eAAe;;AAAf,eAAe;IAJ3B,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,yDAAY,EAAE,uDAAW,EAAE,uDAAW,EAAE,kEAAqB,CAAC,MAAM,CAAC,EAAE,gEAAe,CAAC;QACjG,YAAY,EAAE,CAAC,kDAAS,CAAC;KAC1B,CAAC;GACW,eAAe;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnBsB;AACkD;AAChC;AACF;IAOrDM,SAAS,SAATA,SAAS;EAYpBC,YACSC,YAA0B,EAC1BC,eAAgC,EAChCC,aAA4B,EAC5BC,YAA0B,EACzBC,iBAAoC;IAJrC,KAAAJ,YAAY,GAAZA,YAAY;IACZ,KAAAC,eAAe,GAAfA,eAAe;IACf,KAAAC,aAAa,GAAbA,aAAa;IACb,KAAAC,YAAY,GAAZA,YAAY;IACX,KAAAC,iBAAiB,GAAjBA,iBAAiB;IAhB3B,KAAAC,OAAO,GAAgE;MACrEC,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZC,UAAU,EAAE;KACb;IACD,KAAAC,OAAO,GAAY,KAAK;IAGxB,KAAAC,QAAQ,GAAQ,CAAC;EASX;EAEAC,KAAKA,CAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,+IAAA;MACT,IAAID,KAAI,CAACP,OAAO,CAACC,QAAQ,IAAIM,KAAI,CAACP,OAAO,CAACE,QAAQ,EAAC;QACjD,IAAI;UACF,MAAMO,QAAQ,SAASF,KAAI,CAACZ,YAAY,CAACW,KAAK,CAACC,KAAI,CAACP,OAAO,CAAC;UAC5D,IAAIS,QAAQ,EAAC;YACXC,cAAc,CAACC,OAAO,CAAC,SAAS,EAAEC,IAAI,CAACC,SAAS,CAACJ,QAAQ,CAAC,CAAC;YAC3DF,KAAI,CAACO,YAAY,CAAC,2BAA2B,CAAC;YAC9CP,KAAI,CAACH,OAAO,GAAG,IAAI;YACnB,MAAMG,KAAI,CAACQ,WAAW,EAAE;;SAE3B,CAAC,OAAOC,KAAK,EAAE;UACdT,KAAI,CAACO,YAAY,CAACE,KAAK,CAACA,KAAK,CAACC,MAAM,CAAC;;OAExC,MAAM;QACLV,KAAI,CAACO,YAAY,CAAC,oCAAoC,CAAC;;IACxD;EACH;EAEMC,WAAWA,CAAA;IAAA,IAAAG,MAAA;IAAA,OAAAV,+IAAA;MACf,MAAMW,OAAO,SAASD,MAAI,CAACnB,iBAAiB,CAACqB,MAAM,CAAC;QAClDC,QAAQ,EAAE;OACX,CAAC;MACF,MAAMF,OAAO,CAACG,OAAO,EAAE;MACtBJ,MAAI,CAACpB,YAAY,CAACyB,KAAK,EAAE,CAACC,SAAS,CAAC;QACnCC,IAAI,EAAEhB,QAAQ,IAAG;UACfS,MAAI,CAACQ,KAAK,GAAGjB,QAAQ,CAACkB,IAAI;UAC1BC,OAAO,CAACC,GAAG,CAACX,MAAI,CAACQ,KAAK,CAAC;QACzB,CAAC;QACDV,KAAK,EAAEA,KAAK,IAAG;UACbY,OAAO,CAACC,GAAG,CAACb,KAAK,CAAC;QACpB;OACD,CAAC;IAAC;EACL;EAEAc,YAAYA,CAACC,KAAK;IAChB,IAAI,CAAC1B,QAAQ,GAAG0B,KAAK,CAACC,EAAE;IACxBtB,cAAc,CAACC,OAAO,CAAC,MAAM,EAACC,IAAI,CAACC,SAAS,CAACkB,KAAK,CAAC,CAAC;EACtD;EAEAE,MAAMA,CAAA;IACJ,IAAI,IAAI,CAAC5B,QAAQ,KAAK,CAAC,EAAE;MACvB,IAAI,CAACR,aAAa,CAACqC,YAAY,CAAC,YAAY,CAAC;KAC9C,MAAM;MACL,IAAI,CAACpB,YAAY,CAAC,oCAAoC,CAAC;;EAE3D;EAGMA,YAAYA,CAACqB,OAAO;IAAA,IAAAC,MAAA;IAAA,OAAA5B,+IAAA;MACxB,MAAM6B,KAAK,SAASD,MAAI,CAACxC,eAAe,CAACwB,MAAM,CAAC;QAC9Ce,OAAO;QACPd,QAAQ,EAAE,IAAI;QACdiB,KAAK,EAAE,MAAM;QACbC,QAAQ,EAAE;OACX,CAAC;MACFF,KAAK,CAACf,OAAO,EAAE;IAAC;EAClB;;;;;;;;;;;;;AA5EW7B,SAAS,GAAA+C,iDAAA,EALrBrD,wDAAS,CAAC;EACTsD,QAAQ,EAAE,WAAW;EACrBC,QAAA,EAAAC,wDAAgC;;CAEjC,CAAC,GACWlD,SAAS","sources":["./src/app/pages/login/login.module.ts","./src/app/pages/login/login.page.ts"],"sourcesContent":["import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { LoginPage } from './login.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LoginPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [CommonModule, FormsModule, IonicModule, RouterModule.forChild(routes), TranslateModule],\r\n  declarations: [LoginPage]\r\n})\r\nexport class LoginPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { AlertController, LoadingController, NavController, ToastController } from '@ionic/angular';\r\nimport { SedesService } from 'src/app/services/sedes/sedes.service';\r\nimport { LoginService } from '../../services/login/login.service';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss']\r\n})\r\nexport class LoginPage  {\r\n  account: { username: string; password: string; rememberMe: boolean } = {\r\n    username: '',\r\n    password: '',\r\n    rememberMe: false\r\n  };\r\n  isLogin: boolean = false;\r\n  sedes: any ;\r\n  handlerMessage: string;\r\n  selected: any = 0;\r\n\r\n\r\n  constructor(\r\n    public loginService: LoginService,\r\n    public toastController: ToastController,\r\n    public navController: NavController,\r\n    public sedesService: SedesService, \r\n    private loadingController: LoadingController \r\n    ) { }\r\n\r\n  async login() {\r\n    if (this.account.username && this.account.password){\r\n      try {\r\n        const response = await this.loginService.login(this.account)\r\n        if (response){\r\n          sessionStorage.setItem('account', JSON.stringify(response))\r\n          this.presentToast('Successful authentication') \r\n          this.isLogin = true\r\n          await this.searchSedes()\r\n        }\r\n      } catch (error) {\r\n        this.presentToast(error.error.detail) \r\n      }\r\n    } else {\r\n      this.presentToast('Username and password are required')\r\n    }\r\n  }\r\n\r\n  async searchSedes(){\r\n    const loading = await this.loadingController.create({\r\n      duration: 2000,\r\n    });\r\n    await loading.present();\r\n     this.sedesService.query().subscribe({\r\n      next: response => {\r\n        this.sedes = response.body;\r\n        console.log(this.sedes)\r\n      },\r\n      error: error => {\r\n        console.log(error)\r\n      },\r\n    });\r\n  }\r\n\r\n  sedeSelected(value) {\r\n    this.selected = value.id\r\n    sessionStorage.setItem('sede',JSON.stringify(value))\r\n  }\r\n\r\n  goHome(){\r\n    if (this.selected !== 0) {\r\n      this.navController.navigateRoot('/tabs/home')\r\n    } else {\r\n      this.presentToast('Seleccione una sede para continuar')\r\n    }\r\n  }\r\n\r\n\r\n  async presentToast(message) {\r\n    const toast = await this.toastController.create({\r\n      message,\r\n      duration: 2000,\r\n      color: 'dark',\r\n      position: 'top'\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n}\r\n"],"names":["Component","LoadingController","NavController","ToastController","SedesService","LoginService","LoginPage","constructor","loginService","toastController","navController","sedesService","loadingController","account","username","password","rememberMe","isLogin","selected","login","_this","_asyncToGenerator","response","sessionStorage","setItem","JSON","stringify","presentToast","searchSedes","error","detail","_this2","loading","create","duration","present","query","subscribe","next","sedes","body","console","log","sedeSelected","value","id","goHome","navigateRoot","message","_this3","toast","color","position","__decorate","selector","template","__NG_CLI_RESOURCE__0"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}